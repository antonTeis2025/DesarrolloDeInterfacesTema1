
### Cargar datos a tabla
---
Haremos que al cargar el programa, se muestren todos los registros almacenados en BBDD en la tabla. Creamos esta función en la clase Conexion

```python
def cargarClientesTabla():  
    # Preparamos una query  
    query = QtSql.QSqlQuery()  
    query.prepare("SELECT dni, apellidos, nombre FROM clientes")  
    # Ejecutamos la query  
    if query.exec():  
	    # Limpiamos la tabla para asegurarnos  
		var.ui.tablaClientes.clearContents()  
		var.ui.tablaClientes.setRowCount(0)
        index = 0 # Creamos un indice para insertar en la tabla de la UI  
        # Mientras la query tenga siguiente dato:        while query.next():  
            # query.value -> [dni, apellidos, nombre]  
            dni = query.value(0)  
            apellidos = query.value(1)  
            nombre = query.value(2)  
  
            var.ui.tablaClientes.setRowCount(index+1) # Crea la fila  
            # setItem(fila, columna, valor (objeto QTableWidgetItem))            var.ui.tablaClientes.setItem(index, 0, QtWidgets.QTableWidgetItem(str(dni)))  
            var.ui.tablaClientes.setItem(index, 1, QtWidgets.QTableWidgetItem(str(apellidos)))  
            var.ui.tablaClientes.setItem(index, 2, QtWidgets.QTableWidgetItem(str(nombre)))  
            # Pasa a la siguiente fila  
            index += 1
```

**Llamamos esta funcion en Main** para que siempre que se inicie el programa se consulten los valores de la BBDD

```python
# Carga valores de la tabla clientes a la tabla de la UI  
conexion.Conexion.cargarClientesTabla()
```

También la llamaremos cuando **se quieran [[1. Insertar datos]]**, para que aparezca el dato nuevo insertado:

```python
if query.exec():  
    print("[+] Insercion correcta de ", cliente)  
    Conexion.cargarClientesTabla()  
else:  
    print("Error ", query.lastError().text())
```