Para poder interactuar con la base de datos, usaremos la **clase Conexion**. En ella haremos un método que cree la conexión y que se ejecute siempre nada más abrir la aplicación.

Primero, definimos el nombre del archivo Sqlite en [[var.py]], para no tener que siempre estar escribiendolo.

```python
dbfile = "clientes.db"
```

Ahora creamos el método en la clase Conexion, en el fichero **conexion.py**

```python
def db_connection(self):  
    # Comprobamos que existe el archivo de BBDD  
    if not os.path.exists(var.dbfile):  
		print("ERROR: No existe el fichero de BBDD")
        return False  
    # Conexion con BBDD sqlite  
    db = QtSql.QSqlDatabase.addDatabase('QSQLITE')  
    db.setDatabaseName(var.dbfile)  
  
    if db.open():  
        # Consulta para ver si hay tablas  
        query = QtSql.QSqlQuery()  
        query.exec("SELECT name FROM sqlite_master WHERE type='table'")  
  
        # Si NO hay tablas  
        if not query.next():  
            print("ERROR: No hay tablas en tu BBDD")  
            return False  
        else:  
            print("[+] Conexión correcta a la BBDD")  
            return True  
    else:  
        print("Ha habido un error en la conexión con la BBDD")  
        return False
```

Incluimos la siguiente línea en Main para que siempre haya conexión al abrir la app.

```python
# Cargar conexion a base de datos  
conexion.Conexion.db_connection()
```